<html>
<head>
	<title></title>

	<script type="text/html" id="template-form">
	  <div class='contact'>
	  	<%= Html.editorForModel(model) %>
	  </div>
	</script>


	<script type="text/javascript" src="jquery.min.js"></script>
	<script type="text/javascript" src="underscore-backbone.min.js"></script>
	<script type="text/javascript" src="piewpiew.core.js"></script>
	<script type="text/javascript" src="piewpiew.backbone.js"></script>
	<script type="text/javascript" src="piewpiew.backbone.models.js"></script>
	<script type="text/javascript" src="piewpiew.backbone.views.js"></script>
	<script type="text/javascript">
	$.fn.serializeObject = function()
	{
	    var o = {};
	    var a = this.serializeArray();
	    $.each(a, function() {
	        if (o[this.name] !== undefined) {
	            if (!o[this.name].push) {
	                o[this.name] = [o[this.name]];
	            }
	            o[this.name].push(this.value || '');
	        } else {
	            o[this.name] = this.value || '';
	        }
	    });
	    return o;
	};

		Person = piewpiew.Model.extend({
			fields: {
				
				firstName : new piewpiew.models.fields.StringField({
					label: "First name",
					validators: {
						length: new piewpiew.models.validators.StringValidator({
							minLength: 2,
							maxLength: 6
						})
					}		
				}),

				lastName : new piewpiew.models.fields.StringField({
					label: "Last name",
					validators: {
						length: new piewpiew.models.validators.StringValidator({
							minLength: 2,
							maxLength: 6
						})
					}					
				})
			}
		});

		FormView = piewpiew.View.extend({
			el: 'body',
			template: $('#template-form').html(),
			templateContext: function() {
				return {
					model:this.model
				};
			}
		});

	</script>

	
</head>
<body>
	


	<script type="text/javascript">

		var model = new Person({
			firstName: "Simon",
			lastName: "Annnnn"
		});

		var view = new FormView({
			model: model
		});

		console.log("view is " + view.render().$el.html());


		$("#create-person-form").submit(function() {
			var values = $(this).serializeObject();

			var p = new Person();
			p.set(values);

			return false;
		});
	</script>
</body>
</html>