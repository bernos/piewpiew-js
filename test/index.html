<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">

    <title>Mocha Tests</title>

    <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
    
    <script type="text/javascript" src="../node_modules/chai/chai.js"></script>
    <script type="text/javascript" src="../node_modules/mocha/mocha.js"></script>
    <script type="text/javascript" src="../node_modules/requirejs/require.js"></script>

    <script type="text/javascript" >
      // Use the chai 'assert' library
      var expect = chai.expect;     
      var assert = chai.assert;

      // Set mocha up for tdd
      mocha.setup({
        ui : 'bdd',
        globals : ['piewpiew', '_', 'Backbone']
      });

      // Configure requirejs
      require.config({
        baseUrl: '../src/',

        paths: {
          // Common libraries
          'jquery'    : '../lib/jquery-1.7.1.min',
          'underscore': '../lib/underscore-1.3.1.min',
          'backbone'  : '../lib/backbone-0.9.2.min',
          
          // Require JS plugins
          'text'      : '../lib/text',
          'i18n'      : '../lib/i18n',
          'domReady'  : '../lib/domReady'
        },

        shim : {
          'underscore' : {
            exports : '_'
          },

          'backbone' : {
            deps : ['underscore'],
            exports : 'Backbone'          
          }
        }
      });
    </script>

    <script src="piewpiew.forms.fields.js"></script>
    <script src="piewpiew.validators.js"></script>

    <script>
      require(['jquery'], function($) {
        $(function() {
          mocha.run();
        });
      });    
    </script>
  </head>
  <body>
    <div id="mocha"></div>  
  </body>
</html>